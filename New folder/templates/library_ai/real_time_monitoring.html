{% extends 'library_ai/base.html' %}
{% load static %}

{% block title %}Real-time Monitoring - Trend Shelf AI{% endblock %}

{% block content %}
<h2 class="text-3xl font-bold mb-6">Real-time Library Monitoring</h2>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
    <div class="glassmorphism p-6">
        <div class="flex items-center">
            <div class="p-3 bg-blue-500/80 rounded-full mr-4">
                <i class="fas fa-users fa-lg text-white"></i>
            </div>
            <div>
                <p class="text-sm text-gray-400">Active Users</p>
                <p id="active-users" class="text-2xl font-bold">0</p>
            </div>
        </div>
    </div>
    <div class="glassmorphism p-6">
        <div class="flex items-center">
            <div class="p-3 bg-green-500/80 rounded-full mr-4">
                <i class="fas fa-book fa-lg text-white"></i>
            </div>
            <div>
                <p class="text-sm text-gray-400">Books Borrowed Today</p>
                <p id="books-borrowed" class="text-2xl font-bold">0</p>
            </div>
        </div>
    </div>
    <div class="glassmorphism p-6">
        <div class="flex items-center">
            <div class="p-3 bg-yellow-500/80 rounded-full mr-4">
                <i class="fas fa-clock fa-lg text-white"></i>
            </div>
            <div>
                <p class="text-sm text-gray-400">Avg. Visit Duration</p>
                <p id="avg-duration" class="text-2xl font-bold">0m</p>
            </div>
        </div>
    </div>
    <div class="glassmorphism p-6">
        <div class="flex items-center">
            <div class="p-3 bg-red-500/80 rounded-full mr-4">
                <i class="fas fa-exclamation-triangle fa-lg text-white"></i>
            </div>
            <div>
                <p class="text-sm text-gray-400">Alerts</p>
                <p id="alerts-count" class="text-2xl font-bold">0</p>
            </div>
        </div>
    </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
    <div class="glassmorphism p-6">
        <h3 class="text-xl font-semibold mb-4">Real-time Activity Feed</h3>
        <div id="activity-feed" class="space-y-3 max-h-96 overflow-y-auto">
            <div class="flex items-center p-3 bg-gray-700/30 rounded-lg">
                <i class="fas fa-circle text-green-400 mr-3"></i>
                <div>
                    <p class="text-sm">System initialized</p>
                    <p class="text-xs text-gray-400">Just now</p>
                </div>
            </div>
        </div>
    </div>
    <div class="glassmorphism p-6">
        <h3 class="text-xl font-semibold mb-4">Popular Books Right Now</h3>
        <div id="popular-books" class="space-y-3">
            <p class="text-gray-400">Loading popular books...</p>
        </div>
    </div>
</div>

<div class="glassmorphism p-6">
    <h3 class="text-xl font-semibold mb-4">Hourly Activity Chart</h3>
    <div class="chart-container">
        <canvas id="activityChart"></canvas>
    </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
    <div class="glassmorphism p-6">
        <h3 class="text-xl font-semibold mb-4">System Health</h3>
        <div class="space-y-4">
            <div class="flex justify-between items-center">
                <span>AI Model Status</span>
                <span id="ai-status" class="tag tag-acquire">Online</span>
            </div>
            <div class="flex justify-between items-center">
                <span>Database Connection</span>
                <span id="db-status" class="tag tag-acquire">Connected</span>
            </div>
            <div class="flex justify-between items-center">
                <span>API Response Time</span>
                <span id="api-response" class="text-green-400">< 100ms</span>
            </div>
            <div class="flex justify-between items-center">
                <span>Memory Usage</span>
                <span id="memory-usage" class="text-yellow-400">45%</span>
            </div>
        </div>
    </div>
    <div class="glassmorphism p-6">
        <h3 class="text-xl font-semibold mb-4">Recent Alerts</h3>
        <div id="recent-alerts" class="space-y-2">
            <p class="text-gray-400">No recent alerts</p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/real_time_monitoring.js' %}"></script>
{% endblock %}